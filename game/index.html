<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>blabla</title>
    <link rel="stylesheet" href="style.css">


  </head>

  <body>
        <!-- JS Objects -->
    <script src="classes/character.class.js"></script>
    <script src="classes/npc.class.js"></script>
    <script src="classes/experience.class.js"></script>
    <script src="classes/player.class.js"></script>
    <script src="classes/participant.class.js"></script>
    <script src="classes/task.class.js"></script>

        <!-- Managers Objects -->
    <script src="managers/manager.class.js"></script>
    <script src="managers/mainmanager.class.js"></script>
    <script src="managers/charactermanager.class.js"></script>
    <script src="managers/npcmanager.class.js"></script>
    <script src="managers/experiencemanager.class.js"></script>
    <script src="managers/playermanager.class.js"></script>
    <script src="managers/participantmanager.class.js"></script>
    <script src="managers/taskmanager.class.js"></script>

        <!-- Map Objects -->
    <script src="maps/map.class.js"></script>
    <script src="maps/tile.class.js"></script>
    <script src="maps/mapmanager.class.js"></script>

        
        <!-- END JS Objects -->
    <h1></h1>
    <canvas></canvas>

  <!--<script src="main.js"></script>-->

    <script>
      var mapManager = new MapManager();
      var con = new XMLHttpRequest();
       
      con.open("GET","maps/maps.xml");
      con.setRequestHeader("Content-Type","text/xml");
      con.send();
      con.onload = handler;

      function handler(){
        if(this.status == 200 && this.responseXML != null &&this.responseXML) {
          getObjects(this.responseXML);
        } 
      }
      function getObjects(xmlDoc){
        for(var i = 0; i < xmlDoc.childNodes.length; i++){
          var map = xmlDoc.childNodes[i];
          var name,image,rows,cols;
          if(map.getElementsByTagName("name")[0].textContent.toString() != null){
            name = map.getElementsByTagName("name")[0].textContent.toString();
          }
          if(map.getElementsByTagName("background")[0].textContent.toString() != null){
            image = map.getElementsByTagName("background")[0].textContent.toString();
          }
          if(map.getElementsByTagName("rows")[0].textContent != null){
            rows = map.getElementsByTagName("rows")[0].textContent;
          }
          if(map.getElementsByTagName("cols")[0].textContent != null){
            cols = map.getElementsByTagName("cols")[0].textContent;
          }
          if(map.getElementsByTagName("id")[0].textContent != null){
            id = map.getElementsByTagName("id")[0].textContent;
          }
          
          //var map = new Map(height,width,image);
          mapManager.createMap(rows,cols,image,id);
        }

        
          //var map = new Map(0,0,null);
          //map.draw(nodes);
      }
      
    </script>

  </body>
</html>